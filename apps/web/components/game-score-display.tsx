"use client";

type GameScoreDisplayProps = {
  score: number;
  isFlip7Bonus?: boolean;
  size?: "default" | "large";
  textClassName?: string;
  numberScaleClassName?: string;
};

export function GameScoreDisplay({
  score,
  isFlip7Bonus = false,
  size = "default",
  textClassName,
  numberScaleClassName,
}: GameScoreDisplayProps) {
  const sizeClasses =
    size === "large"
      ? "h-52 w-52 sm:h-72 sm:w-72 lg:h-80 lg:w-80"
      : "h-40 w-40 sm:h-60 sm:w-60 lg:h-72 lg:w-72";
  const textClasses =
    size === "large"
      ? "text-6xl sm:text-8xl lg:text-9xl"
      : "text-5xl sm:text-7xl lg:text-8xl";

  return (
    <div className="flex items-center justify-center">
      <div className={`relative ${sizeClasses}`}>
        <svg
          viewBox="0 0 600 600"
          className={`absolute inset-0 h-full w-full transition ${
            isFlip7Bonus ? "bonus-active" : "bonus-inactive"
          }`}
          aria-hidden="true"
        >
            <defs>
              <linearGradient
                id="bonus-gradient"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="0%"
              >
                <stop offset="0%" stopColor="#ff4f70" />
                <stop offset="50%" stopColor="#ffd04a" />
                <stop offset="100%" stopColor="#46d2ff" />
              </linearGradient>
              <mask
                id="bonus-mask"
                maskUnits="userSpaceOnUse"
                maskContentUnits="userSpaceOnUse"
                x="0"
                y="0"
                width="600"
                height="600"
              >
                <rect width="600" height="600" fill="black" />
                <g className="bonus-spin" fill="white">
                  <animateTransform
                    attributeName="transform"
                    attributeType="XML"
                    type="rotate"
                    from="0 300 300"
                    to="-360 300 300"
                    dur="14s"
                    repeatCount="indefinite"
                  />
                  <g id="flip-7-bonus">
                    <g id="group">
                      <path d="M223.73,79.56c-.99-.48-2.1-.5-3.31-.07s-2.06,1.15-2.52,2.16c-.46,1-.48,2.1-.06,3.28l1.75,4.9c.42,1.19,1.13,2.02,2.13,2.5.99.48,2.1.5,3.31.07s2.06-1.16,2.52-2.16c.46-1,.48-2.1.05-3.28l-1.75-4.9c-.42-1.19-1.13-2.02-2.13-2.5Z"/>
                      <path d="M490.12,430.18l-4.61-3.3c-1.15-.83-2.33-1.14-3.54-.94-1.21.2-2.23.88-3.05,2.03-.83,1.15-1.14,2.34-.94,3.54.2,1.21.88,2.23,2.03,3.05l4.61,3.3c1.15.83,2.33,1.14,3.54.94,1.21-.2,2.23-.88,3.05-2.03.83-1.15,1.14-2.33.94-3.54s-.88-2.23-2.03-3.05Z"/>
                      <path d="M468.17,452.87c-1.1,0-2.11.44-3.02,1.36l-9.01,9.05c-.91.92-1.36,1.93-1.35,3.03.01,1.1.47,2.1,1.36,2.99.89.89,1.89,1.34,2.99,1.35,1.1,0,2.11-.44,3.02-1.36l9.01-9.05c.91-.92,1.36-1.92,1.35-3.03-.01-1.1-.47-2.1-1.36-2.99s-1.89-1.34-2.99-1.35Z"/>
                      <path d="M448.09,449.19c-1.29,0-2.46.53-3.51,1.58-1.05,1.05-1.57,2.22-1.56,3.51,0,1.29.53,2.46,1.58,3.51s2.22,1.57,3.51,1.56c1.29,0,2.46-.53,3.51-1.58s1.57-2.22,1.56-3.51c0-1.29-.53-2.46-1.58-3.51-1.05-1.04-2.22-1.57-3.51-1.56Z"/>
                      <path d="M380.4,510.17c-.42-1.19-1.13-2.02-2.13-2.5-.99-.48-2.1-.5-3.31-.07s-2.06,1.16-2.52,2.16c-.46,1-.48,2.1-.05,3.28l1.75,4.9c.42,1.19,1.13,2.02,2.13,2.5.99.48,2.1.5,3.31.07s2.06-1.15,2.52-2.16c.46-1,.48-2.1.06-3.28l-1.75-4.9Z"/>
                      <path d="M586.42,262.52l-3.27-3.92c-14.9-17.87-21.2-41.38-17.23-64.31l.87-5.03c4.83-27.85-10.95-55.17-37.48-64.92l-4.8-1.76c-21.84-8.02-39.06-25.24-47.08-47.08l-1.76-4.8c-9.75-26.53-37.07-42.31-64.92-37.48l-5.03.87c-22.93,3.97-46.44-2.33-64.31-17.23l-3.92-3.27c-21.71-18.11-53.25-18.11-74.96,0l-3.92,3.27c-17.87,14.9-41.38,21.2-64.31,17.23l-5.03-.87c-27.85-4.83-55.17,10.95-64.92,37.48l-1.76,4.8c-8.02,21.84-25.24,39.06-47.08,47.08l-4.8,1.76c-26.53,9.75-42.31,37.07-37.48,64.92l.87,5.03c3.97,22.93-2.33,46.44-17.23,64.31l-3.27,3.92c-18.11,21.71-18.11,53.25,0,74.96l3.27,3.92c14.9,17.87,21.2,41.38,17.23,64.31l-.87,5.03c-4.83,27.85,10.95,55.17,37.48,64.92l4.8,1.76c21.84,8.02,39.06,25.24,47.08,47.08l1.76,4.8c9.75,26.53,37.07,42.31,64.92,37.48l5.03-.87c22.93-3.97,46.44,2.33,64.31,17.23l3.92,3.27c21.71,18.11,53.25,18.11,74.96,0l3.92-3.27c17.87-14.9,41.38-21.2,64.31-17.23l5.03.87c27.85,4.83,55.17-10.95,64.92-37.48l1.76-4.8c8.02-21.84,25.24-39.06,47.08-47.08l4.8-1.76c26.53-9.75,42.31-37.07,37.48-64.92l-.87-5.03c-3.97-22.93,2.33-46.44,17.23-64.31l3.27-3.92c18.11-21.71,18.11-53.25,0-74.96ZM93.06,250.93l-2.72,11.99-7.84-1.78,2.72-11.99c.09-.4.04-.76-.14-1.07-.19-.32-.5-.53-.93-.62-.43-.1-.8-.04-1.1.16-.31.21-.5.51-.59.91l-2.72,11.99-18.44-4.18,3.97-17.52,7.84,1.78-2.09,9.22c-.09.4-.04.76.14,1.08.19.32.49.52.93.62.43.1.8.04,1.1-.16.3-.21.5-.51.59-.91l.84-3.69c.63-2.77,1.98-4.8,4.05-6.11,2.07-1.31,4.49-1.65,7.26-1.02,2.77.63,4.8,1.98,6.11,4.05,1.31,2.07,1.65,4.49,1.02,7.26ZM101.71,222.99l-16.87-6.19c-1.06-.39-2.04-.38-2.93.03-.89.41-1.53,1.15-1.92,2.22-.39,1.06-.38,2.04.03,2.93.41.89,1.15,1.53,2.22,1.92l16.87,6.19-2.77,7.55-27.96-10.26,4.07-11.1c1.22-3.32,3.22-5.62,6.01-6.91s5.84-1.33,9.16-.11l16.87,6.19-2.77,7.55ZM111.81,200.96c-1.65,3.12-3.95,5.13-6.88,6.04-2.94.91-5.97.53-9.09-1.12l-15.88-8.4,3.76-7.11,15.88,8.4c1,.53,1.97.65,2.91.36.94-.29,1.67-.93,2.2-1.94.53-1,.65-1.97.36-2.91-.29-.94-.93-1.67-1.94-2.2l-15.88-8.4,3.76-7.11,26.33,13.93-5.53,10.45ZM127.62,176.72c-2.24,3.13-4.99,4.95-8.26,5.48-3.27.53-6.45-.32-9.55-2.54l-4.61-3.3c-3.1-2.22-4.93-4.96-5.48-8.23-.55-3.26.29-6.46,2.53-9.58,2.24-3.13,4.99-4.95,8.26-5.48,3.27-.53,6.45.32,9.55,2.54l4.61,3.3c3.1,2.22,4.92,4.96,5.48,8.23.55,3.26-.29,6.46-2.53,9.58ZM151.94,162.78l-11.39-11.34c-2.6,2.61-5.5,3.92-8.68,3.93-3.19,0-6.09-1.29-8.7-3.89s-3.92-5.5-3.93-8.68c0-3.19,1.29-6.09,3.89-8.7l17.01-17.09,28.81,28.69-17.01,17.09ZM182.58,135.37l-10.94-17.69,7.64-4.72c.62-.38.99-.87,1.12-1.47.13-.6.01-1.19-.35-1.78l-9.2-14.88,6.84-4.23,14.67,23.72-8.85,5.47c-.62.38-.99.87-1.12,1.47-.13.6-.01,1.19.35,1.78.36.59.84.96,1.44,1.11.59.15,1.2.04,1.82-.34l17.09-10.57,4.23,6.84-24.73,15.29ZM227.75,99.97c-3.47,1.24-6.65,1.18-9.53-.18-2.88-1.36-4.94-3.78-6.19-7.25l-1.75-4.9c-1.24-3.47-1.18-6.65.18-9.53,1.36-2.88,3.78-4.94,7.25-6.19l.45-.16c1.07-.38,1.81-1.02,2.23-1.9.42-.89.44-1.86.06-2.93l-2.39-6.68,7.57-2.71,13.71,38.28-11.57,4.14ZM237.97,65.58l7.8-1.92,7.12,28.92-7.8,1.92-7.12-28.92ZM247.69,105.06l-1.47-5.97,7.8-1.92,1.47,5.97-7.8,1.92ZM260.85,102.01l-7.04-40.05,7.92-1.39,7.04,40.05-7.92,1.39ZM273.14,99.73l-.62-8.01,9.66-.75c1.19-.09,2.13-.54,2.81-1.33.68-.8.97-1.79.88-2.98-.09-1.19-.54-2.13-1.33-2.81-.8-.68-1.79-.98-2.99-.88l-9.66.75-.62-8.01,9.66-.75c.91-.07,1.63-.41,2.15-1.02s.75-1.37.68-2.28l-1.05-13.43,8.01-.62,3.16,40.54-20.74,1.62ZM352.31,494.94l1.47,5.97-7.8,1.92-1.47-5.97,7.8-1.92ZM319.07,525.07c-.91.07-1.63.41-2.15,1.02s-.75,1.37-.68,2.28l1.05,13.43-8.01.62-3.16-40.54,20.74-1.61.62,8.01-9.66.75c-1.19.09-2.13.54-2.81,1.33-.68.8-.97,1.79-.88,2.98.09,1.19.54,2.13,1.33,2.81.8.68,1.79.98,2.99.88l9.66-.75.62,8.01-9.66.75ZM338.27,539.43l-7.04-40.05,7.92-1.39,7.04,40.05-7.92,1.39ZM354.23,536.34l-7.12-28.92,7.8-1.92,7.12,28.92-7.8,1.92ZM389.54,521.89c-1.36,2.88-3.78,4.94-7.25,6.19l-.45.16c-1.07.38-1.81,1.02-2.23,1.9-.42.89-.44,1.86-.06,2.93l2.39,6.68-7.57,2.71-13.71-38.28,11.57-4.14c3.47-1.24,6.65-1.18,9.53.18,2.88,1.36,4.94,3.78,6.19,7.25l1.75,4.9c1.24,3.47,1.18,6.65-.18,9.53ZM422.32,509.4l-14.67-23.72,8.85-5.47c.62-.38.99-.87,1.12-1.47.13-.6.01-1.19-.35-1.78-.36-.59-.84-.96-1.44-1.11-.59-.15-1.2-.04-1.82.34l-17.09,10.57-4.23-6.84,24.73-15.29,10.94,17.69-7.64,4.72c-.62.38-.99.87-1.12,1.47-.13.6-.01,1.19.35,1.78l9.2,14.88-6.84,4.23ZM476.88,465.91l-17.01,17.09-28.81-28.69,17.01-17.09,11.39,11.34c2.6-2.61,5.5-3.92,8.68-3.93,3.19,0,6.09,1.29,8.7,3.89s3.92,5.5,3.93,8.68c0,3.19-1.29,6.09-3.89,8.7ZM497.74,441.46c-2.24,3.13-4.99,4.95-8.26,5.48-3.27.53-6.45-.32-9.55-2.54l-4.61-3.3c-3.1-2.22-4.92-4.96-5.48-8.23-.55-3.26.29-6.46,2.53-9.58,2.24-3.13,4.99-4.95,8.26-5.48,3.27-.53,6.45.32,9.55,2.54l4.61,3.3c3.1,2.22,4.93,4.96,5.48,8.23.55,3.26-.29,6.46-2.53,9.58ZM516.29,409.62l-15.88-8.4c-1-.53-1.97-.65-2.91-.36-.94.29-1.67.93-2.2,1.94-.53,1-.65,1.97-.36,2.91.29.94.93,1.67,1.94,2.2l15.88,8.4-3.76,7.11-26.33-13.93,5.53-10.45c1.65-3.12,3.95-5.13,6.88-6.04,2.94-.91,5.97-.53,9.09,1.12l15.88,8.4-3.76,7.11ZM527.55,383.72c-1.22,3.32-3.22,5.62-6.01,6.91s-5.84,1.33-9.16.11l-16.87-6.19,2.77-7.55,16.87,6.19c1.06.39,2.04.38,2.93-.03.89-.41,1.53-1.15,1.92-2.22s.38-2.04-.03-2.93c-.41-.89-1.15-1.53-2.22-1.92l-16.87-6.19,2.77-7.55,27.96,10.26-4.07,11.1ZM534.73,361.19l-7.84-1.78,2.09-9.22c.09-.4.04-.76-.14-1.08-.19-.32-.49-.52-.93-.62-.43-.1-.8-.04-1.1.16-.3.21-.5.51-.59.91l-.84,3.69c-.63,2.77-1.98,4.8-4.05,6.11-2.07,1.31-4.49,1.65-7.26,1.02-2.77-.63-4.8-1.98-6.11-4.05-1.31-2.07-1.65-4.49-1.02-7.26l2.72-11.99,7.84,1.78-2.72,11.99c-.09.4-.04.76.14,1.07.19.32.5.53.93.62.43.1.8.04,1.1-.16.31-.21.5-.51.59-.91l2.72-11.99,18.44,4.18-3.97,17.52Z"/>
                      <path d="M120,165.44l-4.61-3.3c-1.15-.83-2.33-1.14-3.54-.94-1.21.2-2.23.88-3.05,2.03-.83,1.15-1.14,2.33-.94,3.54s.88,2.23,2.03,3.05l4.61,3.3c1.15.83,2.33,1.14,3.54.94,1.21-.2,2.23-.88,3.05-2.03.83-1.15,1.14-2.34.94-3.54-.2-1.21-.88-2.23-2.03-3.05Z"/>
                      <path d="M128.82,139.76c-.91.92-1.36,1.92-1.35,3.03.01,1.1.47,2.1,1.36,2.99s1.89,1.34,2.99,1.35,2.11-.44,3.02-1.36l9.01-9.05c.91-.92,1.36-1.93,1.35-3.03-.01-1.1-.47-2.1-1.36-2.99-.89-.89-1.89-1.34-2.99-1.35-1.1,0-2.11.44-3.02,1.36l-9.01,9.05Z"/>
                      <path d="M151.91,150.81c1.29,0,2.46-.53,3.51-1.58,1.05-1.05,1.57-2.22,1.56-3.51,0-1.29-.53-2.46-1.58-3.51s-2.22-1.57-3.51-1.56c-1.29,0-2.46.53-3.51,1.58s-1.57,2.22-1.56,3.51c0,1.29.53,2.46,1.58,3.51,1.05,1.04,2.22,1.57,3.51,1.56Z"/>
                    </g>
                  </g>
                </g>
              </mask>
            </defs>
            <rect
              width="600"
              height="600"
              fill="url(#bonus-gradient)"
              mask="url(#bonus-mask)"
            />
          </svg>
        <div className="absolute inset-0 flex items-center justify-center">
          <div
            className={`font-atkinson ${textClasses} font-bold ${
              textClassName ??
              (isFlip7Bonus
                ? "text-white dark:text-black"
                : "text-black dark:text-[#7ce7ff]")
            }`}
          >
            <span className={numberScaleClassName}>{score}</span>
          </div>
        </div>
      </div>
      <style jsx>{`
        .bonus-active {
          opacity: 1;
          transform: scale(1);
          animation: bonus-in 240ms ease-out forwards;
        }

        .bonus-inactive {
          opacity: 0;
          transform: scale(0.9);
          pointer-events: none;
        }

        @keyframes bonus-in {
          from {
            opacity: 0;
            transform: scale(0.9);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

      `}</style>
    </div>
  );
}
